// closure
task helloClosureConfig{
  doLast{
    person{
      personName = "张三"
      personAge = 20
      dumpPerson()
    }
  }
}
class Person{
  String personName
  int personAge
  def dumpPerson(){
    println "name is ${personName},age is ${personAge}"
  }
}

def person(Closure<Person> closure){
  Person p = new Person()
  closure.delegate = p
  closure.setResolveStrategy(Closure.DELEGATE_FIRST);
  closure(p)
}

def method1(){
  println "Context this:${this.getClass()} in root"
  println "method1 in root"
}

class Delegate{
  def method1(){
    println "Delegate this:${this.getClass()} in Delegate"
    println "method1 in Delegate"
  }

  def test(Closure<Delegate> closure){
    closure(this)
  }
}

task helloClosureDelegate{
  doLast{
    new Delegate().test{
      println "thisObject:${thisObject.getClass()}"
      println "owner:${owner.getClass()}"
      println "delegate:${delegate.getClass()}"
      method1()
      it.method1()
    }

  }
}

task helloClosureList{
  doLast{
    customEachList{
      println it
    }
  }
}
def customEachList(closure){
  for(int i in 1..10){
    closure(i)
  }
}

// multi param closure
task helloClosureMap{
  doLast{
    customEachMap{
      k,v -> println "${k} is ${v}"
    }
  }
}

def customEachMap(closure){
  def screenSize = ['w':1024,'h':768]
  screenSize.each{
    closure(it.key,it.value)
  }
}

// Method
def getMaxValue(int a,int b){
  if (a > b) { a }
  else { b }
}

task hello{
  doLast{
    logger.info("Hello,INFO Log.")
    println 'Hello,World!'
  }
}

task printStringClass {
  doLast{
    def str1 = '单引号'
    def str2 = "双引号"
    println "单引号定义的字符串类型:" + str1.getClass().name
    println "双引号定义的字符串类型:" + str2.getClass().name
  }
}

task printStringVar {
  doLast{
    def name = '张三'
    println '单引号的变量计算:${name}'
    println "双引号的变量计算:${name}"
  }
}

task printList{
  doLast{
    def numList = [1,2,3,4,5,6]
    println numList.getClass().name;
    println numList[1]
    println numList[-1]
    println numList[-2]
    println numList[1..3]

    numList.each{
      println it
    }
  }
}

task printMap{
  doLast{
    def screenSize = ['w':1024,'h':768]
    println screenSize.getClass().name

    println 'w:' + screenSize.w
    println 'h:' + screenSize['h']

    screenSize.each{
      println "Key:${it.key},Value:${it.value}"

    }
  }
}
